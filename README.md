# 部落冲突建筑工人计时器使用说明

## 简介

部落冲突建筑工人计时器是一个专为《部落冲突》(Clash of Clans) 玩家设计的工具，帮助您有效管理多个账号的建筑升级任务。该工具可以追踪建筑升级的剩余时间，在升级完成时发送通知并播放提示音。

### 可以直接访问网页：https://kele-24856.github.io/cocstopwatch/

## 主要功能

- 添加和管理多个建筑升级任务
- 实时倒计时显示（天、小时、分钟、秒）
- 升级完成时弹出浏览器通知并播放提示音
- 支持管理多个账号的任务
- 数据本地持久化存储
- 可安装为PWA应用，支持离线使用
- 响应式设计，适配移动端和桌面端

## 使用方法

### 添加任务

1. 点击右下角的 **+** 按钮打开添加任务窗口
2. 选择账号（如果没有导入过数据，系统会提供默认的5个账号）
3. 选择建筑类型（进攻类建筑、防御类建筑、研究类建筑）
4. 设置升级所需时间（天、小时、分钟）
5. 点击"开始升级"按钮确认添加

### 导入数据

1. 点击右下角的 **📥** 按钮打开导入数据窗口
2. 将部落.txt文件的内容粘贴到文本框中
3. 点击"解析并导入"按钮
4. 系统会自动解析数据并添加相应的倒计时任务

> 注意：导入数据时，如果账号已存在任务，系统会先清空该账号的所有任务，再添加新解析的任务，确保数据一致性。

### 查看任务

- 主界面会显示所有账号的任务列表
- 每个任务卡片显示：
  - 账号和建筑类型
  - 实时倒计时
  - 预计完成时间（年-月-日 时:分:秒）
- 已完成的任务会显示为灰色

### 管理任务

- 点击任务卡片右上角的 ❌ 按钮可以删除任务
- 任务完成后会自动标记为完成状态，并发送通知

## 技术特点

### 数据存储

- 所有数据都存储在浏览器的本地存储中（localStorage）
- 不会上传到任何服务器，保护您的隐私
- 即使关闭浏览器，数据也会保留

### 通知系统

- 当建筑升级完成时，会弹出浏览器通知
- 同时会播放提示音
- 通知功能需要在安全环境下使用（HTTPS或localhost）

### 响应式设计

- 适配各种屏幕尺寸（手机、平板、电脑）
- 在移动设备上也有良好的使用体验

## 注意事项

1. 通知功能仅在安全上下文（HTTPS或localhost）下可用
2. Safari浏览器对PWA支持有限，部分功能可能受限
3. 若页面关闭且Service Worker未正确注册，可能导致通知丢失
4. 请确保浏览器允许通知权限，以便接收升级完成提醒

## 常见问题

### 为什么没有收到通知？

请检查以下设置：
- 浏览器是否允许此网站发送通知
- 是否在安全环境下使用（HTTPS或localhost）
- 是否关闭了浏览器的通知功能

### 导入数据失败怎么办？

请确保：
- 粘贴的是部落冲突的json原始内容
- 文件内容没有被修改或损坏
- 每行都是有效的JSON格式

### 数据丢失了怎么办？

数据存储在浏览器本地，如果出现以下情况可能导致数据丢失：
- 清除了浏览器缓存和数据
- 更换了浏览器或设备
- 使用了无痕/隐私浏览模式


## 技术信息

- 前端技术：HTML5 + CSS3 + JavaScript (ES6)
- 状态存储：localStorage
- 离线能力：Service Worker
- PWA支持：manifest.json + Web App Manifest API
- 通知系统：Web Notifications API
- 音频播放：Web Audio API

## 浏览器兼容性

- Chrome 60+
- Firefox 57+
- Safari 11.1+
- Edge 79+

## 部署方式

1. **本地使用**：直接打开index.html文件或通过本地服务器访问
2. **局域网访问**：运行server.js并通过手机浏览器连接
3. **在线部署**：可部署到GitHub Pages或Gitee Pages等平台
